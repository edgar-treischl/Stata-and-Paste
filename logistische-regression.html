<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Logistische Regression | Stata and Paste</title>
  <meta name="description" content="Chapter 6 Logistische Regression | Stata and Paste" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Logistische Regression | Stata and Paste" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="edgartreischl/Stata-and-Paste.git" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Logistische Regression | Stata and Paste" />
  
  
  

<meta name="author" content="Edgar Treischl" />


<meta name="date" content="2021-04-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="linear-regression.html"/>
<link rel="next" href="visualisierungen.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #ffffff;
    color: #a0a0a0;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
div.sourceCode
  { color: #1f1c1b; background-color: #ffffff; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #1f1c1b; } /* Normal */
code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
code span.an { color: #ca60ca; } /* Annotation */
code span.at { color: #0057ae; } /* Attribute */
code span.bn { color: #b08000; } /* BaseN */
code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #924c9d; } /* Char */
code span.cn { color: #aa5500; } /* Constant */
code span.co { color: #898887; } /* Comment */
code span.cv { color: #0095ff; } /* CommentVar */
code span.do { color: #607880; } /* Documentation */
code span.dt { color: #0057ae; } /* DataType */
code span.dv { color: #b08000; } /* DecVal */
code span.er { color: #bf0303; text-decoration: underline; } /* Error */
code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code span.fl { color: #b08000; } /* Float */
code span.fu { color: #644a9b; } /* Function */
code span.im { color: #ff5500; } /* Import */
code span.in { color: #b08000; } /* Information */
code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code span.op { color: #1f1c1b; } /* Operator */
code span.ot { color: #006e28; } /* Other */
code span.pp { color: #006e28; } /* Preprocessor */
code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #ff5500; } /* SpecialString */
code span.st { color: #bf0303; } /* String */
code span.va { color: #0057ae; } /* Variable */
code span.vs { color: #bf0303; } /* VerbatimString */
code span.wa { color: #bf0303; } /* Warning */
</style>

<link rel="stylesheet" href="css/stylePR.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="index.html">Stata and Paste</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="the-basics.html"><a href="the-basics.html"><i class="fa fa-check"></i><b>2</b> The Basics</a>
<ul>
<li class="chapter" data-level="2.1" data-path="the-basics.html"><a href="the-basics.html#use-and-describe"><i class="fa fa-check"></i><b>2.1</b> <em>use</em> and <em>describe</em></a></li>
<li class="chapter" data-level="2.2" data-path="the-basics.html"><a href="the-basics.html#sysuse"><i class="fa fa-check"></i><b>2.2</b> <em>(sys)use</em></a></li>
<li class="chapter" data-level="2.3" data-path="the-basics.html"><a href="the-basics.html#list"><i class="fa fa-check"></i><b>2.3</b> list</a></li>
<li class="chapter" data-level="2.4" data-path="the-basics.html"><a href="the-basics.html#order"><i class="fa fa-check"></i><b>2.4</b> order</a></li>
<li class="chapter" data-level="2.5" data-path="the-basics.html"><a href="the-basics.html#tab"><i class="fa fa-check"></i><b>2.5</b> <em>tab</em></a></li>
<li class="chapter" data-level="2.6" data-path="the-basics.html"><a href="the-basics.html#ados-installieren"><i class="fa fa-check"></i><b>2.6</b> Ados installieren</a></li>
<li class="chapter" data-level="2.7" data-path="the-basics.html"><a href="the-basics.html#pfad-angebenfinden"><i class="fa fa-check"></i><b>2.7</b> Pfad angeben/finden</a></li>
<li class="chapter" data-level="2.8" data-path="the-basics.html"><a href="the-basics.html#display-keep-save-edit"><i class="fa fa-check"></i><b>2.8</b> <em>display</em>, <em>keep</em>, <em>save</em>, <em>edit</em></a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-preparation.html"><a href="data-preparation.html"><i class="fa fa-check"></i><b>3</b> Data Preparation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-preparation.html"><a href="data-preparation.html#recode"><i class="fa fa-check"></i><b>3.1</b> <em>recode</em></a></li>
<li class="chapter" data-level="3.2" data-path="data-preparation.html"><a href="data-preparation.html#generate-und-replace"><i class="fa fa-check"></i><b>3.2</b> <em>generate</em> und <em>replace</em></a></li>
<li class="chapter" data-level="3.3" data-path="data-preparation.html"><a href="data-preparation.html#egen"><i class="fa fa-check"></i><b>3.3</b> <em>egen</em></a></li>
<li class="chapter" data-level="3.4" data-path="data-preparation.html"><a href="data-preparation.html#label"><i class="fa fa-check"></i><b>3.4</b> <em>label</em></a></li>
<li class="chapter" data-level="3.5" data-path="data-preparation.html"><a href="data-preparation.html#mathematische-transformationen"><i class="fa fa-check"></i><b>3.5</b> Mathematische Transformationen</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="the-basics-of-data-analysis.html"><a href="the-basics-of-data-analysis.html"><i class="fa fa-check"></i><b>4</b> The Basics of Data Analysis</a>
<ul>
<li class="chapter" data-level="4.1" data-path="the-basics-of-data-analysis.html"><a href="the-basics-of-data-analysis.html#summarize"><i class="fa fa-check"></i><b>4.1</b> <em>summarize</em></a></li>
<li class="chapter" data-level="4.2" data-path="the-basics-of-data-analysis.html"><a href="the-basics-of-data-analysis.html#correlation"><i class="fa fa-check"></i><b>4.2</b> <em>correlation</em></a></li>
<li class="chapter" data-level="4.3" data-path="the-basics-of-data-analysis.html"><a href="the-basics-of-data-analysis.html#t-test"><i class="fa fa-check"></i><b>4.3</b> t-test</a></li>
<li class="chapter" data-level="4.4" data-path="the-basics-of-data-analysis.html"><a href="the-basics-of-data-analysis.html#missing-values"><i class="fa fa-check"></i><b>4.4</b> <em>missing values</em></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="linear-regression.html"><a href="linear-regression.html"><i class="fa fa-check"></i><b>5</b> Linear Regression</a>
<ul>
<li class="chapter" data-level="5.1" data-path="linear-regression.html"><a href="linear-regression.html#regress"><i class="fa fa-check"></i><b>5.1</b> regress</a></li>
<li class="chapter" data-level="5.2" data-path="linear-regression.html"><a href="linear-regression.html#vorhersagen-per-hand"><i class="fa fa-check"></i><b>5.2</b> Vorhersagen per Hand</a></li>
<li class="chapter" data-level="5.3" data-path="linear-regression.html"><a href="linear-regression.html#esttab"><i class="fa fa-check"></i><b>5.3</b> esttab</a></li>
<li class="chapter" data-level="5.4" data-path="linear-regression.html"><a href="linear-regression.html#coefplot"><i class="fa fa-check"></i><b>5.4</b> coefplot</a></li>
<li class="chapter" data-level="5.5" data-path="linear-regression.html"><a href="linear-regression.html#interaktionen"><i class="fa fa-check"></i><b>5.5</b> Interaktionen (##)</a></li>
<li class="chapter" data-level="5.6" data-path="linear-regression.html"><a href="linear-regression.html#log-modelle-lin-log"><i class="fa fa-check"></i><b>5.6</b> Log Modelle: Lin-Log</a></li>
<li class="chapter" data-level="5.7" data-path="linear-regression.html"><a href="linear-regression.html#log-lin"><i class="fa fa-check"></i><b>5.7</b> Log-Lin</a></li>
<li class="chapter" data-level="5.8" data-path="linear-regression.html"><a href="linear-regression.html#log-log"><i class="fa fa-check"></i><b>5.8</b> Log-Log</a></li>
<li class="chapter" data-level="5.9" data-path="linear-regression.html"><a href="linear-regression.html#optionen-robust"><i class="fa fa-check"></i><b>5.9</b> Optionen: robust</a></li>
<li class="chapter" data-level="5.10" data-path="linear-regression.html"><a href="linear-regression.html#esample"><i class="fa fa-check"></i><b>5.10</b> e(sample)</a></li>
<li class="chapter" data-level="5.11" data-path="linear-regression.html"><a href="linear-regression.html#ereturn-list"><i class="fa fa-check"></i><b>5.11</b> ereturn list</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="logistische-regression.html"><a href="logistische-regression.html"><i class="fa fa-check"></i><b>6</b> Logistische Regression</a>
<ul>
<li class="chapter" data-level="6.1" data-path="logistische-regression.html"><a href="logistische-regression.html#logit"><i class="fa fa-check"></i><b>6.1</b> logit</a></li>
<li class="chapter" data-level="6.2" data-path="logistische-regression.html"><a href="logistische-regression.html#or"><i class="fa fa-check"></i><b>6.2</b> or</a></li>
<li class="chapter" data-level="6.3" data-path="logistische-regression.html"><a href="logistische-regression.html#or-per-kreutabelle-berechnen"><i class="fa fa-check"></i><b>6.3</b> OR per Kreutabelle berechnen</a></li>
<li class="chapter" data-level="6.4" data-path="logistische-regression.html"><a href="logistische-regression.html#margins"><i class="fa fa-check"></i><b>6.4</b> margins</a></li>
<li class="chapter" data-level="6.5" data-path="logistische-regression.html"><a href="logistische-regression.html#lrtest"><i class="fa fa-check"></i><b>6.5</b> lrtest</a></li>
<li class="chapter" data-level="6.6" data-path="logistische-regression.html"><a href="logistische-regression.html#fitstat"><i class="fa fa-check"></i><b>6.6</b> fitstat</a></li>
<li class="chapter" data-level="6.7" data-path="logistische-regression.html"><a href="logistische-regression.html#classification"><i class="fa fa-check"></i><b>6.7</b> classification</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="visualisierungen.html"><a href="visualisierungen.html"><i class="fa fa-check"></i><b>7</b> Visualisierungen</a>
<ul>
<li class="chapter" data-level="" data-path="visualisierungen.html"><a href="visualisierungen.html#histogramm"><i class="fa fa-check"></i>Histogramm</a></li>
<li class="chapter" data-level="" data-path="visualisierungen.html"><a href="visualisierungen.html#gladder"><i class="fa fa-check"></i>Gladder</a></li>
<li class="chapter" data-level="" data-path="visualisierungen.html"><a href="visualisierungen.html#box-plot"><i class="fa fa-check"></i>Box-Plot</a></li>
<li class="chapter" data-level="" data-path="visualisierungen.html"><a href="visualisierungen.html#bar-graph"><i class="fa fa-check"></i>Bar graph</a></li>
<li class="chapter" data-level="" data-path="visualisierungen.html"><a href="visualisierungen.html#ci-bar"><i class="fa fa-check"></i>CI Bar</a></li>
<li class="chapter" data-level="" data-path="visualisierungen.html"><a href="visualisierungen.html#scatter-plot"><i class="fa fa-check"></i>Scatter plot</a></li>
<li class="chapter" data-level="" data-path="visualisierungen.html"><a href="visualisierungen.html#many-more-options"><i class="fa fa-check"></i>Many more options</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="coefplot-1.html"><a href="coefplot-1.html"><i class="fa fa-check"></i><b>8</b> Coefplot</a>
<ul>
<li class="chapter" data-level="8.1" data-path="coefplot-1.html"><a href="coefplot-1.html#sort-and-order"><i class="fa fa-check"></i><b>8.1</b> Sort and order</a></li>
<li class="chapter" data-level="8.2" data-path="coefplot-1.html"><a href="coefplot-1.html#modellvergleiche"><i class="fa fa-check"></i><b>8.2</b> Modellvergleiche</a></li>
<li class="chapter" data-level="8.3" data-path="coefplot-1.html"><a href="coefplot-1.html#further-ado"><i class="fa fa-check"></i><b>8.3</b> Further ado</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Stata and Paste</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="logistische-regression" class="section level1" number="6">
<h1><span class="header-section-number">Chapter 6</span> Logistische Regression</h1>
<p><a href="https://giphy.com/loofandtimmy"><img src="images/titanic_dino.gif" alt="“Source: loofandtimmy”" /></a></p>
<ul>
<li>Mit einer logistischen Regression schätzt Du den Effekt einer metrischen Variable (oder einer Dummy Variable) auf ein binäres Outcome</li>
<li>Unser Beispiel: Hat das Geschlecht einen Effekt, ob eine Person das Titanic Unglück überlebt hat?</li>
</ul>
<p>Mit dem Titanic Datensatz wird im folgenden die Grundbefehle einer logistischen Regression in Stata gezeigt:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb69-1"><a href="logistische-regression.html#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> <span class="st">&quot;https://www.stata-press.com/data/r16/titanic800&quot;</span>, <span class="kw">clear</span></span>
<span id="cb69-2"><a href="logistische-regression.html#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="kw">des</span></span></code></pre></div>
<pre><code>Running C:\Users\gu99mywo\Dropbox\Lehre\NotShared_FAU\EMS\Stata_Paste_BD\pro&gt; e.do ...


(Titanic passenger survival (Extract))


Contains data from https://www.stata-press.com/data/r16/titanic800.dta
  obs:           800                          Titanic passenger survival
                                                (Extract)
 vars:             4                          22 Feb 2019 13:24
                                              (_dta has notes)
-------------------------------------------------------------------------------
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
class           byte    %9.0g      class      Class
adult           byte    %9.0g      age        Adult
male            byte    %9.0g      sex        Male
survived        byte    %9.0g      survived   Survived
-------------------------------------------------------------------------------
Sorted by: </code></pre>
<p>Wir schätzen den Effekt des Geschlechts (male) auf die Überlebenchance (survived) einer Person. Neben einer einfachen Kreuztabelle zeigt beispielsweise auch ein <em>spineplot</em> welcher Anteil an Männern und Frauen den Titanic Unfall (nicht) überlebt hat.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb71-1"><a href="logistische-regression.html#cb71-1" aria-hidden="true" tabindex="-1"></a>*spineplot ist im ado tabplot und muss installiert werden</span>
<span id="cb71-2"><a href="logistische-regression.html#cb71-2" aria-hidden="true" tabindex="-1"></a>spineplot survived male <span class="co">// Splineplot </span></span></code></pre></div>
<p><img src="images/spine.png" /></p>
<p>Mehr als drei Viertel der weiblichen Passagiere hat die Titanic überlebt; währrend ein deutlich größerer Anteil der männlichen Passagiere das Titanic Unglück nicht überlebt hat. Wie viel größer ist das Risiko (bzw. Chancenverhältnis) von Männern gegenüber Frauen? Let’s run a logistic regression to find an answer to this question.</p>
<div id="logit" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> logit</h2>
<ul>
<li>Mit dem <em>logit</em> Befehl werden in Stata die logarithmierten Chancen berechnet. Dies ist schwierig zu interpretieren</li>
<li>Wir können zumindest die Vorzeichen und die Signifikanz interpretieren</li>
</ul>
<div class="sourceCode" id="cb72"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb72-1"><a href="logistische-regression.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="kw">logit</span> survived male</span></code></pre></div>
<pre><code>Running C:\Users\gu99mywo\Dropbox\Lehre\NotShared_FAU\EMS\Stata_Paste_BD\pro&gt; e.do ...



Iteration 0:   log likelihood =  -512.1623  
Iteration 1:   log likelihood = -425.53116  
Iteration 2:   log likelihood = -425.28715  
Iteration 3:   log likelihood = -425.28708  
Iteration 4:   log likelihood = -425.28708  

Logistic regression                             Number of obs     =        800
                                                LR chi2(1)        =     173.75
                                                Prob &gt; chi2       =     0.0000
Log likelihood = -425.28708                     Pseudo R2         =     0.1696

------------------------------------------------------------------------------
    survived |      Coef.   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        male |  -2.477633   .2076944   -11.93   0.000    -2.884706   -2.070559
       _cons |   1.229948   .1844128     6.67   0.000     .8685058    1.591391
------------------------------------------------------------------------------</code></pre>
<div class="note">
<p>Interpretation: Männer haben im Durchschnitt einen 2.477 geringere Log-Odds als Frauen. Der Effekt ist signifikant.</p>
</div>
</div>
<div id="or" class="section level2" number="6.2">
<h2><span class="header-section-number">6.2</span> or</h2>
<ul>
<li>Etwas leichter ist die Interpretation eines Odds Ratios (OR) - das Chancenverhältnis</li>
<li>Hierfür müssen wir die Exponentialfunktion anwenden</li>
</ul>
<div class="sourceCode" id="cb74"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb74-1"><a href="logistische-regression.html#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="kw">di</span> <span class="fu">exp</span>(_b[male]) </span></code></pre></div>
<pre><code>Running C:\Users\gu99mywo\Dropbox\Lehre\NotShared_FAU\EMS\Stata_Paste_BD\pro&gt; e.do ...


.08394172</code></pre>
<ul>
<li>In Stata erhällt man den OR mit der Option <em>or</em>:</li>
</ul>
<div class="sourceCode" id="cb76"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb76-1"><a href="logistische-regression.html#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="kw">logit</span> survived male, <span class="kw">or</span></span></code></pre></div>
<pre><code>Running C:\Users\gu99mywo\Dropbox\Lehre\NotShared_FAU\EMS\Stata_Paste_BD\pro&gt; e.do ...



Iteration 0:   log likelihood =  -512.1623  
Iteration 1:   log likelihood = -425.53116  
Iteration 2:   log likelihood = -425.28715  
Iteration 3:   log likelihood = -425.28708  
Iteration 4:   log likelihood = -425.28708  

Logistic regression                             Number of obs     =        800
                                                LR chi2(1)        =     173.75
                                                Prob &gt; chi2       =     0.0000
Log likelihood = -425.28708                     Pseudo R2         =     0.1696

------------------------------------------------------------------------------
    survived | Odds Ratio   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        male |   .0839417   .0174342   -11.93   0.000     .0558712    .1261153
       _cons |   3.421053    .630886     6.67   0.000     2.383347    4.910574
------------------------------------------------------------------------------
Note: _cons estimates baseline odds.</code></pre>
<div class="note">
<p>Interpretation: Männer haben im Vergleich zu Frauen durchschnittlich eine um den Faktor .083 geringe Chance die Titanic zu überleben. Der Effekt ist statistisch signifikant.</p>
</div>
</div>
<div id="or-per-kreutabelle-berechnen" class="section level2" number="6.3">
<h2><span class="header-section-number">6.3</span> OR per Kreutabelle berechnen</h2>
<ul>
<li>Was der OR wirklich inhaltlich aussagt, lässt sich ganz gut nachvollziehen, wenn wir den OR auf Basis einer Kreuztabelle ausrechnem</li>
</ul>
<div class="sourceCode" id="cb78"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb78-1"><a href="logistische-regression.html#cb78-1" aria-hidden="true" tabindex="-1"></a>*Odds Ratio per Hand ausrechnen</span>
<span id="cb78-2"><a href="logistische-regression.html#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="kw">tab2</span> survived male</span></code></pre></div>
<pre><code>Running C:\Users\gu99mywo\Dropbox\Lehre\NotShared_FAU\EMS\Stata_Paste_BD\pro&gt; e.do ...



-&gt; tabulation of survived by male  

           |         Male
  Survived |    female       male |     Total
-----------+----------------------+----------
        no |        38        491 |       529 
       yes |       130        141 |       271 
-----------+----------------------+----------
     Total |       168        632 |       800 </code></pre>
<ul>
<li>Bei den Männer haben 141 überlebt, 491 aber nicht. Wenn wir diese zwei Zahlen ins Verhältnis zueinander setzen, erhalten wir die Odds. Die Odds zu Überleben von Männer ist 141/491.</li>
<li>Analog müssen wir das gleiche für die Frauen im Datensatz machen.</li>
<li>Zum Glück können wir Stata als Taschenrechner mit <em>display</em> nutzen!</li>
</ul>
<div class="sourceCode" id="cb80"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb80-1"><a href="logistische-regression.html#cb80-1" aria-hidden="true" tabindex="-1"></a>*Odds der Männer</span>
<span id="cb80-2"><a href="logistische-regression.html#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="kw">display</span> 141/491</span>
<span id="cb80-3"><a href="logistische-regression.html#cb80-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-4"><a href="logistische-regression.html#cb80-4" aria-hidden="true" tabindex="-1"></a>*Odds der Frauen</span>
<span id="cb80-5"><a href="logistische-regression.html#cb80-5" aria-hidden="true" tabindex="-1"></a><span class="kw">display</span> 130/38</span></code></pre></div>
<pre><code>Running C:\Users\gu99mywo\Dropbox\Lehre\NotShared_FAU\EMS\Stata_Paste_BD\pro&gt; e.do ...


.28716904

3.4210526</code></pre>
<ul>
<li>Und nun der OR, also das Chancenverhältnis der Männer gegenüber den Frauen die Titanic zu überleben. Wir teilen also die Odds der Männer durch den Wert der Frauen:</li>
</ul>
<div class="sourceCode" id="cb82"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb82-1"><a href="logistische-regression.html#cb82-1" aria-hidden="true" tabindex="-1"></a>*OR </span>
<span id="cb82-2"><a href="logistische-regression.html#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="kw">display</span> .28716904/3.4210526</span></code></pre></div>
<pre><code>Running C:\Users\gu99mywo\Dropbox\Lehre\NotShared_FAU\EMS\Stata_Paste_BD\pro&gt; e.do ...


.08394172</code></pre>
<p>Und kommen so zum gleichen Ergebnis wie die logistische Regression.</p>
</div>
<div id="margins" class="section level2" number="6.4">
<h2><span class="header-section-number">6.4</span> margins</h2>
<ul>
<li>Die Ergebnisse einer logistischen Regression sind NICHT als Wahrscheinlichkeit interpretierbar, jedoch können wir Wahrscheinlichkeiten berechnen mit Hilfe des <em>margins</em> Befehls</li>
<li>Marginaleffekte am Mittelwertsvektor (Befehl: margins, dydx(*) atmeans)</li>
<li>Oder: Average Marginal Effects</li>
</ul>
<div class="sourceCode" id="cb84"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb84-1"><a href="logistische-regression.html#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="kw">quietly</span> <span class="kw">logit</span> survived male</span>
<span id="cb84-2"><a href="logistische-regression.html#cb84-2" aria-hidden="true" tabindex="-1"></a>margins, <span class="kw">dydx</span>(*) continuous</span></code></pre></div>
<pre><code>Running C:\Users\gu99mywo\Dropbox\Lehre\NotShared_FAU\EMS\Stata_Paste_BD\pro&gt; e.do ...




Average marginal effects                        Number of obs     =        800
Model VCE    : OIM

Expression   : Pr(survived), predict()
dy/dx w.r.t. : male

------------------------------------------------------------------------------
             |            Delta-method
             |      dy/dx   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        male |   -.430326   .0228731   -18.81   0.000    -.4751565   -.3854955
------------------------------------------------------------------------------</code></pre>
<div class="note">
<p>Interpretation: Männer haben durchschnittliche eine 43 Prozentpunkte geringere Wahrscheinlichkeit die Titanic zu überleben.</p>
</div>
</div>
<div id="lrtest" class="section level2" number="6.5">
<h2><span class="header-section-number">6.5</span> lrtest</h2>
<ul>
<li>LR Test dient zu Modellvergleiche</li>
<li>Die Nullhypothese besagt, dass sich die Likelihoods von Modell 1 und Modell 2 nicht unterscheiden.</li>
</ul>
<div class="sourceCode" id="cb86"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb86-1"><a href="logistische-regression.html#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="kw">quietly</span> <span class="kw">logit</span> survived male</span>
<span id="cb86-2"><a href="logistische-regression.html#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="kw">est</span> <span class="kw">store</span> m1</span>
<span id="cb86-3"><a href="logistische-regression.html#cb86-3" aria-hidden="true" tabindex="-1"></a><span class="kw">quietly</span> <span class="kw">logit</span> survived male adult</span>
<span id="cb86-4"><a href="logistische-regression.html#cb86-4" aria-hidden="true" tabindex="-1"></a><span class="kw">est</span> <span class="kw">store</span> m2</span>
<span id="cb86-5"><a href="logistische-regression.html#cb86-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-6"><a href="logistische-regression.html#cb86-6" aria-hidden="true" tabindex="-1"></a><span class="kw">lrtest</span> m1 m2</span></code></pre></div>
<pre><code>Running C:\Users\gu99mywo\Dropbox\Lehre\NotShared_FAU\EMS\Stata_Paste_BD\pro&gt; e.do ...







Likelihood-ratio test                                 LR chi2(1)  =      2.20
(Assumption: m1 nested in m2)                         Prob &gt; chi2 =    0.1381</code></pre>
<ul>
<li>Der p-Wert zeigt, dass es keinen signifikanten Unterschied in der Erklärungskraft von Modell 1 und 2 gibt.</li>
</ul>
</div>
<div id="fitstat" class="section level2" number="6.6">
<h2><span class="header-section-number">6.6</span> fitstat</h2>
<ul>
<li><em>fitstat</em> gibt eine Variation an Gütemaße aus (<em>fitstat</em> ist ein Ado und muss <a href="the-basics.html#ados-installieren">installiert</a> werden)</li>
<li>McFaddens Pseudo-R-Quadrat: Keine analoge Interpretation wie R², aber höhere Werte deuten auf ein besseres Modell hin</li>
<li>AIC und BIC: Kleinere Werte deuten auf ein besseres Modell hin</li>
<li>Wir können <em>fitstat</em> direkt nach der Regression rufen oder der Beispielout zeigt, wie wir zuerst die Gütemaße für Model 1 berechnen, diese speichern und mit den Gütemaßen von Modell 2 vergleichen (<em>fitstat, using(m1)</em>)</li>
</ul>
<div class="sourceCode" id="cb88"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb88-1"><a href="logistische-regression.html#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="kw">quietly</span> <span class="kw">logit</span> survived male</span>
<span id="cb88-2"><a href="logistische-regression.html#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="kw">quietly</span> fitstat, <span class="kw">saving</span>(m1)</span>
<span id="cb88-3"><a href="logistische-regression.html#cb88-3" aria-hidden="true" tabindex="-1"></a><span class="kw">quietly</span> <span class="kw">logit</span> survived male adult</span>
<span id="cb88-4"><a href="logistische-regression.html#cb88-4" aria-hidden="true" tabindex="-1"></a>fitstat, <span class="kw">using</span>(m1)</span></code></pre></div>
<pre><code>Running C:\Users\gu99mywo\Dropbox\Lehre\NotShared_FAU\EMS\Stata_Paste_BD\pro&gt; e.do ...






Measures of Fit for logit of survived

                             Current            Saved       Difference
Model:                         logit            logit
N:                               800              800                0
Log-Lik Intercept Only:     -512.162         -512.162            0.000
Log-Lik Full Model:         -424.187         -425.287            1.100
D:                           848.375(797)     850.574(798)      -2.200(-1)
LR:                          175.950(2)       173.750(1)         2.200(1)
Prob &gt; LR:                     0.000            0.000            0.000
McFadden&#39;s R2:                 0.172            0.170            0.002
McFadden&#39;s Adj R2:             0.166            0.166            0.000
Maximum Likelihood R2:         0.197            0.195            0.002
Cragg &amp; Uhler&#39;s R2:            0.273            0.270            0.003
McKelvey and Zavoina&#39;s R2:     0.241            0.237            0.004
Efron&#39;s R2:                    0.228            0.225            0.003
Variance of y*:                4.333            4.310            0.023
Variance of error:             3.290            3.290            0.000
Count R2:                      0.776            0.776            0.000
Adj Count R2:                  0.339            0.339            0.000
AIC:                           1.068            1.068           -0.000
AIC*n:                       854.375          854.574           -0.200
BIC:                       -4479.261        -4483.746            4.485
BIC&#39;:                       -162.581         -167.066            4.485

Difference of    4.485 in BIC&#39; provides positive support for saved model.</code></pre>
<p>Hier scheint auch das Model 1 minimal besser an die Daten angepasst zu sein, da zumindest das BIC kleiner ausfällt.</p>
</div>
<div id="classification" class="section level2" number="6.7">
<h2><span class="header-section-number">6.7</span> classification</h2>
<ul>
<li>Anhand einer Klassifikationstabelle, kann die korrekte Vorhersage, die Sensitivität und die Spezifität abgelesen werden.</li>
</ul>
<div class="sourceCode" id="cb90"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb90-1"><a href="logistische-regression.html#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="kw">estat</span> classification</span></code></pre></div>
<pre><code>Running C:\Users\gu99mywo\Dropbox\Lehre\NotShared_FAU\EMS\Stata_Paste_BD\pro&gt; e.do ...



Logistic model for survived

              -------- True --------
Classified |         D            ~D  |      Total
-----------+--------------------------+-----------
     +     |       130            38  |        168
     -     |       141           491  |        632
-----------+--------------------------+-----------
   Total   |       271           529  |        800

Classified + if predicted Pr(D) &gt;= .5
True D defined as survived != 0
--------------------------------------------------
Sensitivity                     Pr( +| D)   47.97%
Specificity                     Pr( -|~D)   92.82%
Positive predictive value       Pr( D| +)   77.38%
Negative predictive value       Pr(~D| -)   77.69%
--------------------------------------------------
False + rate for true ~D        Pr( +|~D)    7.18%
False - rate for true D         Pr( -| D)   52.03%
False + rate for classified +   Pr(~D| +)   22.62%
False - rate for classified -   Pr( D| -)   22.31%
--------------------------------------------------
Correctly classified                        77.63%
--------------------------------------------------</code></pre>
<div class="note">
<p>Interpretation: In unserem Fall wurden 77.63% der Fälle richtig klassifiziert. Die Sensitiviät liegt bei 47.97%, d.h. 47.97% der Personen die als überlebend identifiziert wurden, haben auch tatsächlich überlebt. Und die Spezifität: 92.82% der Personen die als nicht-überlebend identifiziert wurden, haben auch tatsächlich nicht überlebt.</p>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="linear-regression.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="visualisierungen.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": false
},
"fontsettings": null,
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Stata and Paste.pdf"],
"toc": {
"collapse": "subsection"
},
"info": false
});
});
</script>

</body>

</html>
